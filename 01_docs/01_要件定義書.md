# 要件定義書

## 1. プロジェクト概要

### 1.1 背景・目的
大切な人を亡くした際、遺族は悲しみの中で数多くの煩雑な手続きを行わなければならない。手続きの種類は多岐にわたり、期限や優先順位の把握が難しく、精神的・時間的な負担が大きい。

本プロジェクトは、このような負担を軽減するため、AI技術を活用して以下を実現する：
- 個々の状況に応じた手続きタスクの自動洗い出し
- タスクの優先順位・期限の明確化
- 自治体の補助金・給付金情報の提示
- 進捗管理とリマインド

### 1.2 スコープ
**対象範囲:**
- 家族の死亡後に必要な各種手続きのタスク管理
- 法令、自治体情報、金融機関、保険等の情報に基づく個別最適化されたタスク提示
- LINE公式アカウントを通じたユーザーインターフェース

**対象外:**
- 法律相談・専門的なアドバイス（専門家への橋渡しは可）
- 手続きの代行

### 1.3 想定ユーザー
- 家族を亡くした方（遺族）
- 死亡後の手続きに不安を感じている方
- 手続きの全体像を把握したい方

### 1.4 提供価値
- 手続きの見落とし防止
- 優先順位の明確化による精神的負担の軽減
- 補助金・給付金情報の提供による経済的サポート
- 24時間いつでも相談できる安心感

---

## 2. 機能要件

### 2.1 LINE公式アカウント連携
#### 2.1.1 友達追加・初回ヒアリング
- LINE公式アカウント「受け継ぐAI」を新規作成
- 友達追加をトリガーに初回ヒアリングを開始
- ヒアリング項目：
  - 受け継ぐ家族との続柄（両親、父、母、叔父など）
  - 家族の状況（存命、死後など）
  - 家族の居住地（市町村単位）
  - 自分の居住地（市町村単位）※手続きに関係ない場合は省略可
  - 死亡日

#### 2.1.2 メッセージング機能
- LINE Messaging APIを活用
- ユーザーとのチャット形式でのやり取り
- タスク提示、進捗確認、リマインド送信

### 2.2 タスク洗い出し機能
#### 2.2.1 個別最適化されたタスク生成
- ヒアリング情報を元に、ユーザー固有のタスクを自動生成
- タスクの優先順位、期限を明示
- タスクの実行順序を提示

#### 2.2.2 補助金・給付金情報の提示
- 居住自治体の補助金情報を検索
- 申請により給付されるお金の情報を提示
- 申請方法・期限を明示

#### 2.2.3 知識ベースの構築（RAG方式）
- **RAG（Retrieval-Augmented Generation）構成**
  - Cloud Storage（S3/GCS）でドキュメント管理
  - Embedding処理: OpenAI API / Gemini API
  - ベクトルDB: Pinecone（無料枠）/ ChromaDB（オープンソース）
- 蓄積する情報：
  - e-gov の関係法令
  - 自治体の情報（Webサイト、PDF等）
  - 保険、金融機関の手続き情報
  - X（旧Twitter）やWeb上のtips、豆知識
  - お得な情報、必須手続き情報

#### 2.2.4 情報収集の自動化
- **chrome-dev-mcpツールを活用した自動スクレイピング**
  - APIが提供されていない自治体サイトからの情報収集
  - 金融機関、保険会社のWebサイトからの情報収集
- **定期的な情報更新**
  - スケジューラによる定期実行（週次/月次）
  - 変更検知と差分更新
- **収集データの前処理**
  - HTMLからテキスト抽出
  - PDF解析（OCR含む）
  - 構造化データへの変換

### 2.3 AI連携機能
#### 2.3.1 会話AI（Gemini or Claude API）
- ユーザーとの自然な対話
- 質問への回答
- タスクの詳細説明
- 情報提供

#### 2.3.2 タスク連携
- ユーザーの状況に応じた動的なタスク調整
- 新たに必要となったタスクの追加提案

### 2.4 タスク管理機能
#### 2.4.1 タスク一覧表示
- ユーザー別のタスク一覧をDatabaseに登録
- LINE上でタスク一覧を表示
- Googleフォームライクなチェックリスト形式での表示も可能

#### 2.4.2 タスク完了報告
- LINEメッセージでの報告（例: 「タスク1終わったよ」）
- チェックリストへのチェックによる報告
- 完了後、次のタスクを自動提示

#### 2.4.3 進捗管理
- タスク完了状況の記録
- 未完了タスクのリマインド
- 期限が近いタスクの通知

---

## 3. 非機能要件

### 3.1 セキュリティ
- 個人情報の適切な管理（暗号化、アクセス制御）
- LINE公式アカウントのセキュリティ設定
- API通信の暗号化（HTTPS）
- データベースへのアクセス制限

### 3.2 パフォーマンス
- メッセージ応答時間: 3秒以内
- タスク生成時間: 10秒以内
- 同時接続ユーザー数: 初期は10人程度を想定（スモールスタート）

### 3.3 可用性
- 稼働率: 99%以上
- メンテナンス時間は事前通知

### 3.4 使いやすさ
- LINEという馴染みのあるUIを活用
- 専門用語を避けた分かりやすい表現
- シンプルな操作フロー

### 3.5 拡張性
- 将来的な横展開（保活等）を見据えた設計
- タスク種別の追加が容易な構造

---

## 4. 技術要件

### 4.1 使用技術（候補）
#### フロントエンド
- LINE Messaging API
- LINE公式アカウント

#### バックエンド
- Python / Node.js（選定中）
- AI API: Gemini API / Claude API / OpenAI API
- RAG構成:
  - Cloud Storage: AWS S3 / Google Cloud Storage
  - Embedding: OpenAI Embedding API / Gemini Embedding
  - ベクトルDB: Pinecone（無料枠） / ChromaDB
- 情報収集: chrome-dev-mcp（Webスクレイピング）
- データパイプライン: スケジューラ（cron / Cloud Scheduler）

#### データベース
- PostgreSQL / MySQL（選定中）
- ユーザー情報、タスク情報の管理

#### インフラ
- クラウド: AWS / GCP（選定中）
- サーバーレス構成（AWS Lambda / Cloud Functions）を検討

### 4.2 外部連携
- LINE Messaging API
- Gemini API / Claude API / OpenAI API
- OpenAI Embedding API / Gemini Embedding API
- Pinecone API（ベクトルDB）
- chrome-dev-mcp（Webスクレイピング）
- e-gov API（法令データ取得）
- 自治体オープンデータAPI（可能な範囲で）

### 4.3 開発環境
- バージョン管理: Git / GitHub
- 開発言語: Python / JavaScript（選定中）
- 文字コード: UTF-8
- 改行コード: LF

---

## 5. ビジネスモデル

### 5.1 収益モデル
#### 5.1.1 月額サブスクリプション
- **β版料金**: 500円/月
- **正式版料金**: 検証後に見直し（目安: 1,000〜1,500円/月）
- **決済方法**: Stripe（LINE Pay連携検討）

#### 5.1.2 料金モデルの考え方
- **初期フェーズ**: 死後手続き（3〜6ヶ月の利用期間を想定）
- **将来フェーズ**: 生前からの遺言・資産整理等も含め、年単位でのサービス提供

### 5.2 想定コスト（月額・10ユーザー想定）
#### 無料枠で収まる可能性が高いもの:
- LINE公式アカウント: フリープラン（月200通まで無料）
- Cloud Storage（S3/GCS）: 数GB程度なら無料枠内
- サーバーレス（Lambda/Cloud Functions）: 無料枠大
- Pinecone: 無料枠（1インデックス、制限あり）

#### 課金が発生する可能性があるもの:
- **AI API（最大のコスト）**
  - Gemini 1.5 Flash: 無料枠大（優先検討）
  - GPT-4o-mini: 安価（$0.002/1K tokens以下）
  - Claude: 中程度
- **LINE（200通超過時）**: ライトプラン 月5,000円〜

**想定月額コスト**: 1,000〜10,000円（10人、AI API選定次第）

### 5.3 持続可能性
- クラウド課金の監視体制を構築
- 無料枠を最大限活用
- ユーザー数に応じたスケーリング計画

---

## 6. 制約事項

### 6.1 法的制約
- 法律相談・専門的なアドバイスは提供しない
- あくまで情報提供とタスク管理に特化
- 必要に応じて専門家（弁護士、行政書士等）への相談を促す

### 6.2 技術的制約
- LINE公式アカウントの機能制約に従う
- API利用料金・利用制限に注意
- 自治体情報の網羅性に限界がある場合がある

### 6.3 運用制約
- 個人開発のため、初期はサポート体制が限定的
- ユーザー数増加に伴うスケーリング対応が必要

---

## 7. 将来展開

### 7.1 生前からのサポート拡充（年単位でのライフサイクルカバー）
- **遺言作成支援**
  - 法的に有効な遺言書作成のガイド
  - 公正証書遺言、自筆証書遺言のサポート
  - 専門家（行政書士、弁護士）とのマッチング
- **資産整理・終活サポート**
  - デジタル資産の整理（アカウント、データ等）
  - 金融資産の一覧化
  - エンディングノート作成支援
- **遺産分割協議の調整支援**
  - 相続人間のコミュニケーション支援
  - 遺産分割シミュレーション
  - 専門家への橋渡し

### 7.2 横展開の可能性
- **保活（保育園入園調査・申請）へのタスク管理機能の適用**
  - 同様のヒアリング → タスク生成 → 進捗管理の仕組みが活用可能
  - 自治体ごとの情報収集・提供

### 7.3 機能拡張案
- 専門家とのマッチング機能
- コミュニティ機能（経験者との情報交換）
- 音声入力対応
- 多言語対応

---

## 付録

### 改訂履歴
| バージョン | 日付 | 変更内容 | 変更者 |
|---------|------|---------|--------|
| 1.0 | 2025-10-05 | 初版作成 | - |
| 1.1 | 2025-10-05 | ビジネスモデル追加、将来展開（生前サポート）拡充 | - |

---
作成日: 2025-10-05
最終更新: 2025-10-05
